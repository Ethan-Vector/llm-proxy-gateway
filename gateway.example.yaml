gateway:
  name: ethan-llm-proxy-gateway
  environment: dev
  # for audit: hash of this config is computed at runtime

redaction:
  enabled: true
  # Applies to audit/logging by default (not to provider prompt)
  patterns:
    - name: email
      regex: "(?i)\\b[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,}\\b"
      replacement: "[REDACTED_EMAIL]"
    - name: phone
      regex: "\\b\\+?[0-9][0-9\\-\\s()]{7,}[0-9]\\b"
      replacement: "[REDACTED_PHONE]"

rate_limit:
  enabled: true
  # simple in-memory token bucket per (tenant_id, route)
  requests_per_minute: 60

budgets:
  default:
    max_tokens: 1200
    max_cost_usd: 0.50
  tenants:
    acme:
      max_tokens: 1600
      max_cost_usd: 0.80
  routes:
    support_copilot:
      max_tokens: 1000
      max_cost_usd: 0.40

providers:
  openai_gpt4o_mini:
    kind: openai
    model: "gpt-4o-mini"
    timeout_s: 30
  anthropic_haiku:
    kind: anthropic
    model: "claude-3-5-haiku-latest"
    timeout_s: 30
  local_mock:
    kind: local
    model: "mock-llm"
    timeout_s: 10

routes:
  support_copilot:
    providers: ["openai_gpt4o_mini", "anthropic_haiku", "local_mock"]
  internal_search:
    providers: ["openai_gpt4o_mini", "local_mock"]
